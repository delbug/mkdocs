<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>é¢è¯•å®˜ï¼šä½ æ˜¯æ€ä¹ˆå¤„ç†vueé¡¹ç›®ä¸­çš„é”™è¯¯çš„ï¼Ÿ - å‰ç«¯æŠ€æœ¯æ–‡æ¡£</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "\u9762\u8bd5\u5b98\uff1a\u4f60\u662f\u600e\u4e48\u5904\u7406vue\u9879\u76ee\u4e2d\u7684\u9519\u8bef\u7684\uff1f";
        var mkdocs_page_input_path = "web\\vue\\error.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> å‰ç«¯æŠ€æœ¯æ–‡æ¡£
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">é¦–é¡µ</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">å‰ç«¯åŸºç¡€</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >CSS</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../css/">æ¦‚è¿°</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >åŸºç¡€æ¦‚å¿µ</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../css/selector/">é€‰æ‹©å™¨</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../css/box/">ç›’å­æ¨¡å‹</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../css/animation/">åŠ¨ç”»è¿‡æ¸¡</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >å¸ƒå±€</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../css/grid/">Gridå¸ƒå±€</a>
                </li>
                <li class="toctree-l3"><a class="" href="../../css/flex.md">Flexå¸ƒå±€</a>
                </li>
                <li class="toctree-l3"><a class="" href="../../css/position.md">å®šä½å¸ƒå±€</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >è¿›é˜¶</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../css/css_performance/">CSSæ€§èƒ½</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../css/sass_less_stylus/">é¢„å¤„ç†å™¨</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../css/css3_features/">CSS3æ–°ç‰¹æ€§</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../css/dp_px_dpr_ppi/">åƒç´ å•ä½</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >å®è·µ</a>
    <ul>
                <li class="toctree-l3"><a class="" href="../../css/variables.md">å˜é‡ä½¿ç”¨</a>
                </li>
                <li class="toctree-l3"><a class="" href="../../css/media_queries.md">åª’ä½“æŸ¥è¯¢</a>
                </li>
                <li class="toctree-l3"><a class="" href="../../css/print_styles.md">æ‰“å°æ ·å¼</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >JavaScript</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../JavaScript/">æ¦‚è¿°</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >åŸºç¡€æ¦‚å¿µ</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/data_type/">æ•°æ®ç±»å‹</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/type_conversion/">ç±»å‹è½¬æ¢</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/typeof_instanceof/">typeofå’Œinstanceof</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >ä½œç”¨åŸŸä¸é—­åŒ…</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/scope/">ä½œç”¨åŸŸ</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/closure/">é—­åŒ…</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >å¯¹è±¡ä¸åŸå‹</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/this/">thisæŒ‡å‘</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/prototype/">åŸå‹å’ŒåŸå‹é“¾</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/inherit/">ç»§æ‰¿</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/new/">newæ“ä½œç¬¦</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >æ‰§è¡Œæœºåˆ¶</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/context_stack/">æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆ</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/event_loop/">äº‹ä»¶å¾ªç¯</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >DOMä¸äº‹ä»¶</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/Dom/">DOMæ“ä½œ</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/BOM/">BOMæ“ä½œ</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/event_Model/">äº‹ä»¶æ¨¡å‹</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/event_agent/">äº‹ä»¶ä»£ç†</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >ç½‘ç»œé€šä¿¡</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/ajax/">Ajax</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >å‡½æ•°ç¼–ç¨‹</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/functional_programming/">å‡½æ•°å¼ç¼–ç¨‹</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/function_cache/">å‡½æ•°ç¼“å­˜</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/bind_call_apply/">bind/call/apply</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/debounce_throttle/">é˜²æŠ–å’ŒèŠ‚æµ</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >æ•°æ®å¤„ç†</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/copy/">æ·±æµ…æ‹·è´</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/array_api/">æ•°ç»„API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/string_api/">å­—ç¬¦ä¸²API</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/regexp/">æ­£åˆ™è¡¨è¾¾å¼</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/js_data_structure/">æ•°æ®ç»“æ„</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >æ€§èƒ½ä¼˜åŒ–</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/tail_recursion/">å°¾é€’å½’ä¼˜åŒ–</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/memory_leak/">å†…å­˜æ³„æ¼</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >åº”ç”¨å®è·µ</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/cache/">å‰ç«¯ç¼“å­˜</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/security/">å‰ç«¯å®‰å…¨</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/single_sign/">å•ç‚¹ç™»å½•</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/loss_accuracy/">ç²¾åº¦ä¸¢å¤±</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/visible/">å¯è§†åŒºåŸŸåˆ¤æ–­</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/pull_up_loading_pull_down_refresh/">ä¸Šæ‹‰åŠ è½½ä¸‹æ‹‰åˆ·æ–°</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../JavaScript/continue_to_upload/">æ–­ç‚¹ç»­ä¼ </a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../typescript/">TypeScript</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../es6/">ES6+</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">å‰ç«¯æ¡†æ¶</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../vue3/">Vue3</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../">Vue2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../React/">React</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Node.jså¼€å‘</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../NodeJS/">Node.js</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">å·¥ç¨‹åŒ–å·¥å…·</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../webpack/">Webpack</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../git/">Git</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ç½‘ç»œä¸ç³»ç»Ÿ</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../http/">HTTP</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../linux/">Linux</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ç®—æ³•ä¸è®¾è®¡</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../algorithm/">ç®—æ³•</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../design/">è®¾è®¡æ¨¡å¼</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">å°ç¨‹åºå¼€å‘</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../applet/">å°ç¨‹åº</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">å‰ç«¯æŠ€æœ¯æ–‡æ¡£</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">é¢è¯•å®˜ï¼šä½ æ˜¯æ€ä¹ˆå¤„ç†vueé¡¹ç›®ä¸­çš„é”™è¯¯çš„ï¼Ÿ</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="vue">é¢è¯•å®˜ï¼šä½ æ˜¯æ€ä¹ˆå¤„ç†vueé¡¹ç›®ä¸­çš„é”™è¯¯çš„ï¼Ÿ</h1>
<p><img alt="" src="https://static.vue-js.com/3cafe4f0-4fd9-11eb-ab90-d9ae814b240d.png" /></p>
<h2 id="_1">ä¸€ã€é”™è¯¯ç±»å‹</h2>
<p>ä»»ä½•ä¸€ä¸ªæ¡†æ¶ï¼Œå¯¹äºé”™è¯¯çš„å¤„ç†éƒ½æ˜¯ä¸€ç§å¿…å¤‡çš„èƒ½åŠ›</p>
<p>åœ¨<code>Vue</code> ä¸­ï¼Œåˆ™æ˜¯å®šä¹‰äº†ä¸€å¥—å¯¹åº”çš„é”™è¯¯å¤„ç†è§„åˆ™ç»™åˆ°ä½¿ç”¨è€…ï¼Œä¸”åœ¨æºä»£ç çº§åˆ«ï¼Œå¯¹éƒ¨åˆ†å¿…è¦çš„è¿‡ç¨‹åšäº†ä¸€å®šçš„é”™è¯¯å¤„ç†ã€‚</p>
<p>ä¸»è¦çš„é”™è¯¯æ¥æºåŒ…æ‹¬ï¼š</p>
<ul>
<li>åç«¯æ¥å£é”™è¯¯</li>
<li>ä»£ç ä¸­æœ¬èº«é€»è¾‘é”™è¯¯</li>
</ul>
<h2 id="_2">äºŒã€å¦‚ä½•å¤„ç†</h2>
<h3 id="_3">åç«¯æ¥å£é”™è¯¯</h3>
<p>é€šè¿‡<code>axios</code>çš„<code>interceptor</code>å®ç°ç½‘ç»œè¯·æ±‚çš„<code>response</code>å…ˆè¿›è¡Œä¸€å±‚æ‹¦æˆª</p>
<pre><code class="language-js">apiClient.interceptors.response.use(
  response =&gt; {
    return response;
  },
  error =&gt; {
    if (error.response.status == 401) {
      router.push({ name: &quot;Login&quot; });
    } else {
      message.error(&quot;å‡ºé”™äº†&quot;);
      return Promise.reject(error);
    }
  }
);
</code></pre>
<h3 id="_4">ä»£ç é€»è¾‘é—®é¢˜</h3>
<h4 id="_5">å…¨å±€è®¾ç½®é”™è¯¯å¤„ç†</h4>
<p>è®¾ç½®å…¨å±€é”™è¯¯å¤„ç†å‡½æ•°</p>
<pre><code class="language-js">Vue.config.errorHandler = function (err, vm, info) {
  // handle error
  // `info` æ˜¯ Vue ç‰¹å®šçš„é”™è¯¯ä¿¡æ¯ï¼Œæ¯”å¦‚é”™è¯¯æ‰€åœ¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­
  // åªåœ¨ 2.2.0+ å¯ç”¨
}
</code></pre>
<p><code>errorHandler</code>æŒ‡å®šç»„ä»¶çš„æ¸²æŸ“å’Œè§‚å¯ŸæœŸé—´æœªæ•è·é”™è¯¯çš„å¤„ç†å‡½æ•°ã€‚è¿™ä¸ªå¤„ç†å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå¯è·å–é”™è¯¯ä¿¡æ¯å’Œ <code>Vue</code> å®ä¾‹</p>
<p>ä¸è¿‡å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸åŒ<code>Vue</code> ç‰ˆæœ¬ä¸­ï¼Œè¯¥å…¨å±€ <code>API</code> ä½œç”¨çš„èŒƒå›´ä¼šæœ‰æ‰€ä¸åŒï¼š</p>
<blockquote>
<p>ä» 2.2.0 èµ·ï¼Œè¿™ä¸ªé’©å­ä¹Ÿä¼šæ•è·ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­é‡Œçš„é”™è¯¯ã€‚åŒæ ·çš„ï¼Œå½“è¿™ä¸ªé’©å­æ˜¯ <code>undefined</code> æ—¶ï¼Œè¢«æ•è·çš„é”™è¯¯ä¼šé€šè¿‡ <code>console.error</code> è¾“å‡ºè€Œé¿å…åº”ç”¨å´©</p>
<p>ä» 2.4.0 èµ·ï¼Œè¿™ä¸ªé’©å­ä¹Ÿä¼šæ•è· Vue è‡ªå®šä¹‰äº‹ä»¶å¤„ç†å‡½æ•°å†…éƒ¨çš„é”™è¯¯äº†</p>
<p>ä» 2.6.0 èµ·ï¼Œè¿™ä¸ªé’©å­ä¹Ÿä¼šæ•è· <code>v-on</code> DOM ç›‘å¬å™¨å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ã€‚å¦å¤–ï¼Œå¦‚æœä»»ä½•è¢«è¦†ç›–çš„é’©å­æˆ–å¤„ç†å‡½æ•°è¿”å›ä¸€ä¸ª Promise é“¾ (ä¾‹å¦‚ async å‡½æ•°)ï¼Œåˆ™æ¥è‡ªå…¶ Promise é“¾çš„é”™è¯¯ä¹Ÿä¼šè¢«å¤„ç†</p>
</blockquote>
<h4 id="_6">ç”Ÿå‘½å‘¨æœŸé’©å­</h4>
<p><code>errorCaptured</code>æ˜¯ 2.5.0 æ–°å¢çš„ä¸€ä¸ªç”Ÿå‘½é’©å­å‡½æ•°ï¼Œå½“æ•è·åˆ°ä¸€ä¸ªæ¥è‡ªå­å­™ç»„ä»¶çš„é”™è¯¯æ—¶è¢«è°ƒç”¨</p>
<p>åŸºæœ¬ç±»å‹</p>
<pre><code class="language-js">(err: Error, vm: Component, info: string) =&gt; ?boolean
</code></pre>
<p>æ­¤é’©å­ä¼šæ”¶åˆ°ä¸‰ä¸ªå‚æ•°ï¼šé”™è¯¯å¯¹è±¡ã€å‘ç”Ÿé”™è¯¯çš„ç»„ä»¶å®ä¾‹ä»¥åŠä¸€ä¸ªåŒ…å«é”™è¯¯æ¥æºä¿¡æ¯çš„å­—ç¬¦ä¸²ã€‚æ­¤é’©å­å¯ä»¥è¿”å› <code>false</code> ä»¥é˜»æ­¢è¯¥é”™è¯¯ç»§ç»­å‘ä¸Šä¼ æ’­</p>
<p>å‚è€ƒå®˜ç½‘ï¼Œé”™è¯¯ä¼ æ’­è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœå…¨å±€çš„ <code>config.errorHandler</code> è¢«å®šä¹‰ï¼Œæ‰€æœ‰çš„é”™è¯¯ä»ä¼šå‘é€å®ƒï¼Œå› æ­¤è¿™äº›é”™è¯¯ä»ç„¶ä¼šå‘å•ä¸€çš„åˆ†ææœåŠ¡çš„åœ°æ–¹è¿›è¡Œæ±‡æŠ¥</li>
<li>å¦‚æœä¸€ä¸ªç»„ä»¶çš„ç»§æ‰¿æˆ–çˆ¶çº§ä»å±é“¾è·¯ä¸­å­˜åœ¨å¤šä¸ª <code>errorCaptured</code> é’©å­ï¼Œåˆ™å®ƒä»¬å°†ä¼šè¢«ç›¸åŒçš„é”™è¯¯é€ä¸ªå”¤èµ·ã€‚</li>
<li>å¦‚æœæ­¤ <code>errorCaptured</code> é’©å­è‡ªèº«æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯ï¼Œåˆ™è¿™ä¸ªæ–°é”™è¯¯å’ŒåŸæœ¬è¢«æ•è·çš„é”™è¯¯éƒ½ä¼šå‘é€ç»™å…¨å±€çš„ <code>config.errorHandler</code></li>
<li>ä¸€ä¸ª <code>errorCaptured</code> é’©å­èƒ½å¤Ÿè¿”å› <code>false</code> ä»¥é˜»æ­¢é”™è¯¯ç»§ç»­å‘ä¸Šä¼ æ’­ã€‚æœ¬è´¨ä¸Šæ˜¯è¯´â€œè¿™ä¸ªé”™è¯¯å·²ç»è¢«æå®šäº†ä¸”åº”è¯¥è¢«å¿½ç•¥â€ã€‚å®ƒä¼šé˜»æ­¢å…¶å®ƒä»»ä½•ä¼šè¢«è¿™ä¸ªé”™è¯¯å”¤èµ·çš„ <code>errorCaptured</code> é’©å­å’Œå…¨å±€çš„ <code>config.errorHandler</code></li>
</ul>
<p>ä¸‹é¢æ¥çœ‹ä¸ªä¾‹å­</p>
<p>å®šä¹‰ä¸€ä¸ªçˆ¶ç»„ä»¶<code>cat</code></p>
<pre><code class="language-js">Vue.component('cat', {
    template:`
        &lt;div&gt;
            &lt;h1&gt;Cat: &lt;/h1&gt;
            &lt;slot&gt;&lt;/slot&gt;
        &lt;/div&gt;`,
    props:{
        name:{
            required:true,
            type:String
        }
    },
    errorCaptured(err,vm,info) {
        console.log(`cat EC: ${err.toString()}\ninfo: ${info}`); 
        return false;
    }

});
</code></pre>
<p>å®šä¹‰ä¸€ä¸ªå­ç»„ä»¶<code>kitten</code>ï¼Œå…¶ä¸­<code>dontexist()</code>å¹¶æ²¡æœ‰å®šä¹‰ï¼Œå­˜åœ¨é”™è¯¯</p>
<pre><code class="language-js">Vue.component('kitten', {
    template:'&lt;div&gt;&lt;h1&gt;Kitten: {{ dontexist() }}&lt;/h1&gt;&lt;/div&gt;',
    props:{
        name:{
            required:true,
            type:String
        }
    }
});
</code></pre>
<p>é¡µé¢ä¸­ä½¿ç”¨ç»„ä»¶</p>
<pre><code class="language-html">&lt;div id=&quot;app&quot; v-cloak&gt;
    &lt;cat name=&quot;my cat&quot;&gt;
        &lt;kitten&gt;&lt;/kitten&gt;
    &lt;/cat&gt;
&lt;/div&gt;
</code></pre>
<p>åœ¨çˆ¶ç»„ä»¶çš„<code>errorCaptured</code>åˆ™èƒ½å¤Ÿæ•è·åˆ°ä¿¡æ¯</p>
<pre><code class="language-js">cat EC: TypeError: dontexist is not a function
info: render
</code></pre>
<h3 id="_7">ä¸‰ã€æºç åˆ†æ</h3>
<p>å¼‚å¸¸å¤„ç†æºç </p>
<p>æºç ä½ç½®ï¼š/src/core/util/error.js</p>
<pre><code class="language-js">// Vue å…¨å±€é…ç½®,ä¹Ÿå°±æ˜¯ä¸Šé¢çš„Vue.config
import config from '../config'
import { warn } from './debug'
// åˆ¤æ–­ç¯å¢ƒ
import { inBrowser, inWeex } from './env'
// åˆ¤æ–­æ˜¯å¦æ˜¯Promiseï¼Œé€šè¿‡val.then === 'function' &amp;&amp; val.catch === 'function', val ï¼=== null &amp;&amp; val !== undefined
import { isPromise } from 'shared/util'
// å½“é”™è¯¯å‡½æ•°å¤„ç†é”™è¯¯æ—¶ï¼Œåœç”¨depsè·Ÿè¸ªä»¥é¿å…å¯èƒ½å‡ºç°çš„infinite rendering
// è§£å†³ä»¥ä¸‹å‡ºç°çš„é—®é¢˜https://github.com/vuejs/vuex/issues/1505çš„é—®é¢˜
import { pushTarget, popTarget } from '../observer/dep'

export function handleError (err: Error, vm: any, info: string) {
    // Deactivate deps tracking while processing error handler to avoid possible infinite rendering.
    pushTarget()
    try {
        // vmæŒ‡å½“å‰æŠ¥é”™çš„ç»„ä»¶å®ä¾‹
        if (vm) {
            let cur = vm
            // é¦–å…ˆè·å–åˆ°æŠ¥é”™çš„ç»„ä»¶ï¼Œä¹‹åé€’å½’æŸ¥æ‰¾å½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶ï¼Œä¾æ¬¡è°ƒç”¨errorCaptured æ–¹æ³•ã€‚
            // åœ¨éå†è°ƒç”¨å®Œæ‰€æœ‰ errorCaptured æ–¹æ³•ã€æˆ– errorCaptured æ–¹æ³•æœ‰æŠ¥é”™æ—¶ï¼Œè°ƒç”¨ globalHandleError æ–¹æ³•
            while ((cur = cur.$parent)) {
                const hooks = cur.$options.errorCaptured
                // åˆ¤æ–­æ˜¯å¦å­˜åœ¨errorCapturedé’©å­å‡½æ•°
                if (hooks) {
                    // é€‰é¡¹åˆå¹¶çš„ç­–ç•¥ï¼Œé’©å­å‡½æ•°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„ä¸­
                    for (let i = 0; i &lt; hooks.length; i++) {
                        // å¦‚æœerrorCaptured é’©å­æ‰§è¡Œè‡ªèº«æŠ›å‡ºäº†é”™è¯¯ï¼Œ
                        // åˆ™ç”¨try{}catch{}æ•è·é”™è¯¯ï¼Œå°†è¿™ä¸ªæ–°é”™è¯¯å’ŒåŸæœ¬è¢«æ•è·çš„é”™è¯¯éƒ½ä¼šå‘é€ç»™å…¨å±€çš„config.errorHandler
                        // è°ƒç”¨globalHandleErroræ–¹æ³•
                        try {
                            // å½“å‰errorCapturedæ‰§è¡Œï¼Œæ ¹æ®è¿”å›æ˜¯å¦æ˜¯falseå€¼
                            // æ˜¯falseï¼Œcapture = trueï¼Œé˜»æ­¢å…¶å®ƒä»»ä½•ä¼šè¢«è¿™ä¸ªé”™è¯¯å”¤èµ·çš„ errorCaptured é’©å­å’Œå…¨å±€çš„ config.errorHandler
                            // æ˜¯true capture = faleï¼Œç»„ä»¶çš„ç»§æ‰¿æˆ–çˆ¶çº§ä»å±é“¾è·¯ä¸­å­˜åœ¨çš„å¤šä¸ª errorCaptured é’©å­ï¼Œä¼šè¢«ç›¸åŒçš„é”™è¯¯é€ä¸ªå”¤èµ·
                            // è°ƒç”¨å¯¹åº”çš„é’©å­å‡½æ•°ï¼Œå¤„ç†é”™è¯¯
                            const capture = hooks[i].call(cur, err, vm, info) === false
                            if (capture) return
                        } catch (e) {
                            globalHandleError(e, cur, 'errorCaptured hook')
                        }
                    }
                }
            }
        }
        // é™¤éç¦æ­¢é”™è¯¯å‘ä¸Šä¼ æ’­ï¼Œå¦åˆ™éƒ½ä¼šè°ƒç”¨å…¨å±€çš„é”™è¯¯å¤„ç†å‡½æ•°
        globalHandleError(err, vm, info)
    } finally {
        popTarget()
    }
}
// å¼‚æ­¥é”™è¯¯å¤„ç†å‡½æ•°
export function invokeWithErrorHandling (
handler: Function,
 context: any,
 args: null | any[],
    vm: any,
        info: string
        ) {
            let res
            try {
                // æ ¹æ®å‚æ•°é€‰æ‹©ä¸åŒçš„handleæ‰§è¡Œæ–¹å¼
                res = args ? handler.apply(context, args) : handler.call(context)
                // handleè¿”å›ç»“æœå­˜åœ¨
                // res._isVue an flag to avoid this being observedï¼Œå¦‚æœä¼ å…¥å€¼çš„_isVueä¸ºtureæ—¶(å³ä¼ å…¥çš„å€¼æ˜¯Vueå®ä¾‹æœ¬èº«)ä¸ä¼šæ–°å»ºobserverå®ä¾‹
                // isPromise(res) åˆ¤æ–­val.then === 'function' &amp;&amp; val.catch === 'function', val ï¼=== null &amp;&amp; val !== undefined
                // !res._handled  _handleæ˜¯Promise å®ä¾‹çš„å†…éƒ¨å˜é‡ä¹‹ä¸€ï¼Œé»˜è®¤æ˜¯falseï¼Œä»£è¡¨onFulfilled,onRejectedæ˜¯å¦è¢«å¤„ç†
                if (res &amp;&amp; !res._isVue &amp;&amp; isPromise(res) &amp;&amp; !res._handled) {
                    res.catch(e =&gt; handleError(e, vm, info + ` (Promise/async)`))
                    // avoid catch triggering multiple times when nested calls
                    // é¿å…åµŒå¥—è°ƒç”¨æ—¶catchå¤šæ¬¡çš„è§¦å‘
                    res._handled = true
                }
            } catch (e) {
                // å¤„ç†æ‰§è¡Œé”™è¯¯
                handleError(e, vm, info)
            }
            return res
        }

//å…¨å±€é”™è¯¯å¤„ç†
function globalHandleError (err, vm, info) {
    // è·å–å…¨å±€é…ç½®ï¼Œåˆ¤æ–­æ˜¯å¦è®¾ç½®å¤„ç†å‡½æ•°ï¼Œé»˜è®¤undefined
    // å·²é…ç½®
    if (config.errorHandler) {
        // try{}catch{} ä½å…¨å±€é”™è¯¯å¤„ç†å‡½æ•°
        try {
            // æ‰§è¡Œè®¾ç½®çš„å…¨å±€é”™è¯¯å¤„ç†å‡½æ•°ï¼Œhandle error æƒ³å¹²å•¥å°±å¹²å•¥ğŸ’—
            return config.errorHandler.call(null, err, vm, info)
        } catch (e) {
            // å¦‚æœå¼€å‘è€…åœ¨errorHandlerå‡½æ•°ä¸­æ‰‹åŠ¨æŠ›å‡ºåŒæ ·é”™è¯¯ä¿¡æ¯throw err
            // åˆ¤æ–­errä¿¡æ¯æ˜¯å¦ç›¸ç­‰ï¼Œé¿å…logä¸¤æ¬¡
            // å¦‚æœæŠ›å‡ºæ–°çš„é”™è¯¯ä¿¡æ¯throw err Error('ä½ å¥½æ¯’')ï¼Œå°†ä¼šä¸€èµ·logè¾“å‡º
            if (e !== err) {
                logError(e, null, 'config.errorHandler')
            }
        }
    }
    // æœªé…ç½®å¸¸è§„logè¾“å‡º
    logError(err, vm, info)
}

// é”™è¯¯è¾“å‡ºå‡½æ•°
function logError (err, vm, info) {
    if (process.env.NODE_ENV !== 'production') {
        warn(`Error in ${info}: &quot;${err.toString()}&quot;`, vm)
    }
    /* istanbul ignore else */
    if ((inBrowser || inWeex) &amp;&amp; typeof console !== 'undefined') {
        console.error(err)
    } else {
        throw err
    }
}
</code></pre>
<h3 id="_8">å°ç»“</h3>
<ul>
<li><code>handleError</code>åœ¨éœ€è¦æ•è·å¼‚å¸¸çš„åœ°æ–¹è°ƒç”¨ï¼Œé¦–å…ˆè·å–åˆ°æŠ¥é”™çš„ç»„ä»¶ï¼Œä¹‹åé€’å½’æŸ¥æ‰¾å½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶ï¼Œä¾æ¬¡è°ƒç”¨<code>errorCaptured</code> æ–¹æ³•ï¼Œåœ¨éå†è°ƒç”¨å®Œæ‰€æœ‰ <code>errorCaptured</code> æ–¹æ³•æˆ– <code>errorCaptured</code> æ–¹æ³•æœ‰æŠ¥é”™æ—¶ï¼Œè°ƒç”¨ <code>globalHandleError</code> æ–¹æ³•</li>
<li><code>globalHandleError</code>è°ƒç”¨å…¨å±€çš„ <code>errorHandler</code> æ–¹æ³•ï¼Œå†é€šè¿‡<code>logError</code>åˆ¤æ–­ç¯å¢ƒè¾“å‡ºé”™è¯¯ä¿¡æ¯</li>
<li><code>invokeWithErrorHandling</code>æ›´å¥½çš„å¤„ç†å¼‚æ­¥é”™è¯¯ä¿¡æ¯</li>
<li><code>logError</code>åˆ¤æ–­ç¯å¢ƒï¼Œé€‰æ‹©ä¸åŒçš„æŠ›é”™æ–¹å¼ã€‚éç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œè°ƒç”¨<code>warn</code>æ–¹æ³•å¤„ç†é”™è¯¯</li>
</ul>
<h2 id="_9">å‚è€ƒæ–‡çŒ®</h2>
<ul>
<li>
<p>https://juejin.cn/post/6844904096936230925</p>
</li>
<li>
<p>https://segmentfault.com/a/1190000018606181</p>
</li>
</ul>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
